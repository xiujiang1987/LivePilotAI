# LivePilotAI Day 5 - 使用者指南

## 🎯 系統概述

LivePilotAI Day 5 提供完整的智慧導播功能，結合了即時情緒檢測和 OBS Studio 整合，打造專業級的自動化直播控制系統。

## 🚀 快速啟動

### 1. 系統需求檢查
```bash
# 檢查 Python 版本 (需要 3.9+)
python --version

# 檢查 OBS Studio 安裝
# 確保 OBS Studio 28+ 已安裝並啟用 WebSocket 插件
```

### 2. 依賴項目安裝
```bash
# 安裝基礎依賴
pip install -r requirements.txt

# 安裝 OBS WebSocket 支援
pip install obs-websocket-py websockets asyncio
```

### 3. 啟動應用程式
```bash
# 啟動 Day 5 主應用程式
python main_day5.py
```

## 🎛️ 主控制面板

### 功能區域
1. **攝影機控制區**
   - 選擇攝影機設備
   - 解析度設定
   - 幀率調整

2. **OBS 連接區**
   - WebSocket 伺服器連接
   - 連接狀態顯示
   - 重新連接功能

3. **自動切換控制**
   - 啟用/停用智慧切換
   - 敏感度調整
   - 冷卻時間設定

4. **即時預覽區**
   - 攝影機畫面預覽
   - 情緒檢測結果顯示
   - 臉部框線標示

5. **系統資訊標籤**
   - 系統狀態監控
   - 性能指標顯示
   - 錯誤日誌查看

## 🔧 設定配置

### OBS Studio 設定
1. **啟用 WebSocket**
   - 開啟 OBS Studio
   - 進入「工具」→「WebSocket 伺服器設定」
   - 啟用伺服器（預設埠號：4455）
   - 設定密碼（可選）

2. **場景準備**
   - 建立多個場景（例如：開心、悲傷、驚訝等）
   - 為每個場景設定不同的來源和效果
   - 確保場景名稱清楚易懂

### 情緒映射設定
1. **開啟設定對話框**
   - 點擊主面板的「設定」按鈕
   - 切換到「情緒映射」標籤

2. **配置映射規則**
   - 選擇映射策略：
     - `direct_mapping`: 直接一對一映射
     - `confidence_based`: 基於信心度的映射
     - `hybrid_mapping`: 混合策略
     - `learning_mapping`: 學習型映射

3. **調整觸發條件**
   - 設定信心度閾值 (0.1-1.0)
   - 調整持續時間要求 (0.5-5.0 秒)
   - 配置冷卻時間 (1-30 秒)

## 📊 狀態監控

### 指示燈說明
- 🟢 **綠色**: 系統正常運作
- 🟡 **黃色**: 警告狀態，需要注意
- 🔴 **紅色**: 錯誤狀態，需要處理
- ⚪ **灰色**: 系統未啟動或連接中斷

### 監控項目
1. **攝影機狀態**: 攝影機連接和影像擷取狀態
2. **AI 引擎狀態**: 情緒檢測引擎運行狀態
3. **OBS 連接狀態**: WebSocket 連接和通訊狀態
4. **系統性能**: CPU、記憶體使用率

## 🎬 使用流程

### 基本操作流程
1. **啟動系統**
   ```bash
   python main_day5.py
   ```

2. **配置攝影機**
   - 選擇攝影機設備
   - 調整解析度和幀率
   - 確認預覽畫面正常

3. **連接 OBS Studio**
   - 確保 OBS 已啟動並開啟 WebSocket
   - 在主控制面板輸入連接資訊
   - 點擊「連接」按鈕

4. **配置場景映射**
   - 開啟設定對話框
   - 配置情緒到場景的映射關係
   - 調整觸發參數

5. **啟動智慧導播**
   - 勾選「啟用自動切換」
   - 開始直播或錄影
   - 系統將自動根據情緒切換場景

### 進階操作
1. **自訂情緒映射**
   - 建立個人化的情緒-場景對應
   - 使用學習型映射讓系統適應個人風格
   - 調整敏感度以符合直播需求

2. **性能優化**
   - 監控系統資源使用
   - 調整檢測頻率以平衡性能和準確度
   - 使用 GPU 加速（如可用）

3. **多人檢測**
   - 系統支援同時檢測多個人臉
   - 可設定以主要檢測對象為準
   - 或使用平均情緒作為切換依據

## 🛠️ 故障排除

### 常見問題
1. **攝影機無法連接**
   - 檢查攝影機驅動程式
   - 確認攝影機未被其他應用程式佔用
   - 重新插拔攝影機連接線

2. **OBS 連接失敗**
   - 確認 OBS Studio 已啟動
   - 檢查 WebSocket 設定是否正確
   - 驗證防火牆設定

3. **情緒檢測不準確**
   - 確保充足的光線
   - 調整攝影機角度和距離
   - 檢查臉部是否清晰可見

4. **場景切換過於頻繁**
   - 增加信心度閾值
   - 延長持續時間要求
   - 增加冷卻時間

### 日誌檢查
系統會自動記錄運行日誌：
- **主日誌**: `livepilotai_day5.log`
- **位置**: 應用程式根目錄
- **內容**: 系統狀態、錯誤訊息、性能數據

## 🧪 測試功能

### 整合測試
```bash
# 執行完整的整合測試
python day5_integration_test.py
```

### 性能基準測試
```bash
# 執行性能基準測試
python day5_performance_benchmark.py
```

### 簡單系統測試
```bash
# 執行快速系統檢查
python day5_simple_test.py
```

## 🎥 最佳實踐

### 直播設定建議
1. **場景設計**
   - 為每種主要情緒建立專用場景
   - 使用不同的背景、濾鏡或覆蓋層
   - 保持場景間的視覺一致性

2. **環境準備**
   - 確保穩定的光線條件
   - 保持攝影機穩定
   - 減少背景雜訊和干擾

3. **系統調優**
   - 根據個人表情習慣調整敏感度
   - 設定適當的冷卻時間避免過於頻繁切換
   - 定期檢查系統性能和資源使用

### 性能優化建議
1. **硬體配置**
   - 建議使用 8GB+ RAM
   - 支援 GPU 加速的顯示卡
   - 穩定的攝影機設備

2. **軟體配置**
   - 關閉不必要的背景程式
   - 調整檢測頻率以平衡性能
   - 使用適當的影像解析度

## 📞 技術支援

### 文件資源
- **完整文檔**: `docs/` 目錄
- **API 參考**: `docs/api/`
- **開發指南**: `docs/development/`

### 問題回報
如遇到問題，請提供：
1. 錯誤訊息和日誌
2. 系統配置資訊
3. 重現步驟
4. 預期行為描述

---

**Live PilotAI Day 5 - 讓每一次直播都充滿智慧！** 🎬✨
