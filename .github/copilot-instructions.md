# LivePilotAI - AI智慧導播暨個人化直播助理平台 - AI 編程指南

## 專案概述
LivePilotAI 是基於人工智能的智慧導播系統，能即時分析主播情緒並自動執行場景切換、特效觸發等導播操作。

## 核心技術棧
- **AI 引擎**: 深度學習模型（人臉情緒檢測）
- **影像處理**: OpenCV + 多人臉檢測
- **直播整合**: OBS Studio WebSocket API
- **語言**: Python 3.8+
- **架構**: 模組化設計，易於擴展

## 專案架構

### 語意化結構 (v1.0.0)
```
src/
├── ai_engine/          # AI 情緒檢測引擎
├── obs_integration/    # OBS Studio 整合
└── ui/                # 使用者介面
```

### 測試與示範
```
tests/
├── integration_test.py      # 整合測試
├── performance_benchmark.py # 效能基準測試
└── validation_test.py       # 驗證測試

demos/
├── demo_basic.py           # 基本功能示範
└── demo_features.py        # 進階功能示範
```

## 關鍵開發模式

### 1. AI 情緒檢測模式
```python
# 7種情緒分類系統
emotions = ['happy', 'sad', 'angry', 'surprised', 'fear', 'disgusted', 'neutral']

# 多人臉檢測
def detect_emotions(frame):
    faces = face_cascade.detectMultiScale(frame)
    emotions = []
    for (x, y, w, h) in faces:
        emotion = emotion_model.predict(face_roi)
        emotions.append(emotion)
    return emotions
```

### 2. OBS Studio 整合模式
- **WebSocket 連接**: 即時場景控制
- **場景切換**: 基於情緒狀態自動切換
- **特效觸發**: 情緒變化觸發視覺效果
- **音效控制**: 情緒相關音效自動播放

### 3. 模組化架構
- **AI 引擎**: 獨立的情緒檢測模組
- **OBS 整合**: 可插拔的直播平台整合
- **UI 系統**: 分離的使用者介面層
- **擴展性**: 支援新的 AI 模型和平台

### 4. 效能優化策略
- **即時影像處理**: 高效能的攝影機管理
- **資源監控**: 效能基準測試系統
- **異步處理**: 非阻塞式情緒檢測
- **快取機制**: 模型預測結果快取

## 重要工作流程

### 開發環境設置
```bash
# 安裝依賴
pip install opencv-python tensorflow numpy websocket-client

# 主要啟動 (推薦)
python main.py

# 系統驗證
python tests/integration_test.py

# 功能示範
python demos/demo_basic.py
```

### 測試流程
```bash
# 整合測試
python tests/integration_test.py

# 效能測試
python tests/performance_benchmark.py

# 驗證測試
python tests/validation_test.py
```

### AI 模型訓練
```bash
# 模型訓練 (如果需要)
python tools/train_emotion_model.py

# 模型驗證
python tools/validate_model.py
```

## 專案特有慣例

### 1. 情緒檢測最佳實踐
- **多人臉支援**: 同時檢測多個人臉
- **情緒分類**: 7種基本情緒準確識別
- **實時處理**: 低延遲的情緒檢測
- **準確度優化**: 持續改進檢測準確度

### 2. OBS Studio 整合
- **場景映射**: 情緒狀態對應場景配置
- **平滑切換**: 避免頻繁場景切換
- **錯誤恢復**: OBS 連接中斷時的自動恢復
- **自定義規則**: 用戶可配置的觸發規則

### 3. 使用者介面設計
- **即時預覽**: 情緒檢測結果即時顯示
- **設定管理**: 直觀的參數調整介面
- **狀態監控**: 系統運行狀態即時監控
- **日誌顯示**: 詳細的操作日誌記錄

### 4. 模組化開發
- **接口標準**: 統一的模組接口規範
- **依賴注入**: 鬆耦合的模組設計
- **配置管理**: 集中化的配置系統
- **擴展機制**: 支援第三方模組擴展

## 重要功能模組

### AI 情緒檢測引擎
- **深度學習模型**: 基於卷積神經網路
- **人臉檢測**: 使用 OpenCV 和 Haar 分類器
- **情緒分類**: 7種基本情緒的準確識別
- **多人臉支援**: 同時處理多個人臉

### OBS Studio 整合
- **WebSocket 連接**: 穩定的 OBS 通信
- **場景控制**: 自動場景切換和效果觸發
- **音效管理**: 情緒相關音效自動播放
- **自定義規則**: 用戶可配置的觸發條件

### 使用者介面
- **即時預覽**: 攝影機畫面和情緒檢測結果
- **控制面板**: 系統參數調整和狀態監控
- **歷史記錄**: 情緒變化歷史和統計
- **設定管理**: 個人化的系統設定

## 開發建議

### 新功能開發
1. **需求分析**: 確認直播場景和用戶需求
2. **AI 模型**: 訓練或微調情緒檢測模型
3. **整合設計**: 設計與 OBS 的整合邏輯
4. **測試驗證**: 多種直播情境測試
5. **性能優化**: 確保即時處理性能

### AI 模型優化
- **數據集擴展**: 收集更多樣化的情緒數據
- **模型微調**: 針對特定用戶優化模型
- **準確度提升**: 持續改進檢測準確度
- **延遲優化**: 減少模型推理時間

### 系統整合
- **平台擴展**: 支援更多直播平台
- **硬體優化**: 支援 GPU 加速和專用硬體
- **雲端服務**: 整合雲端 AI 服務
- **多媒體支援**: 支援音頻情緒檢測

## 調試與維護

### 調試工具
- **除錯模式**: `python tools/debug_launcher.py`
- **系統檢查**: `python tools/readiness_check.py`
- **效能監控**: 即時資源使用監控
- **日誌分析**: 詳細的運行日誌

### 常見問題
1. **攝影機無法啟動**: 檢查設備權限和驅動
2. **情緒檢測不準**: 調整模型參數或重新訓練
3. **OBS 連接失敗**: 確認 WebSocket 設定
4. **性能問題**: 使用 GPU 加速或降低解析度

### 版本控制
- **語意版本**: 採用語意化版本控制
- **向後相容**: 確保 API 和設定檔相容
- **變更記錄**: 詳細的功能變更記錄
- **穩定發布**: 穩定版本的定期發布

## 擴展開發

### 新平台支援
- **直播平台**: 支援更多直播平台 API
- **硬體設備**: 支援專業攝影設備
- **AI 服務**: 整合第三方 AI 服務
- **音頻處理**: 增加音頻情緒檢測

### 高級功能
- **個人化學習**: 針對特定用戶優化
- **群體情緒**: 觀眾情緒分析整合
- **自動剪輯**: 基於情緒的自動剪輯
- **數據分析**: 直播數據深度分析

## 部署建議
- **環境隔離**: 使用虛擬環境隔離依賴
- **資源監控**: 監控 CPU、記憶體、GPU 使用
- **錯誤處理**: 建立完善的錯誤恢復機制
- **用戶支援**: 提供詳細的使用手冊和支援
